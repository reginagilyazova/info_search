в казахстан опасный использовать эцп maratkalibek в последний время государство пытаться максимально перенести весь госуслуга в электронный формат активно выдаваться адресный справка и другой справка выдаваться через портал электронный правительство даже можно пожениться через портал на самый дело очень удобно есть конечно же минус в основное организационный на уровень закон на уровень реализация но это уже другой вопрос главный очень хороший начинание это весь хорошо но пост не про это очевидно чтобы пользоваться госуслуга нужно как то подтверждать свой личность для это когда то давно законодательно закрепить использование эцп основный формулировка применение эцп такой эцп приравниваться к собственноручный подпись многие не знать но за передача ключ эцп здесь и далее быть использовать термин ключ эцп весь называть просто эцп а по факт это два пара ключ для аутентификация и подпись за передача три лицо даже есть какой то ответственность очевидно что многий человек это без разница не понимать весь серьёзность вообще тема пост про ncalayer прослойка между браузер и ключ эцп по безопасность это уязвимый механизм использование эцп так как основный реализация криптопровайдер на java и в последний версия браузер нет возможность использовать апплет то нуц придумать оригинальный решение для использование эцп в браузер это решение называться ncalayer ncalayer посредник между браузер криптопровайдер и ключ эцп ncalayer устанавливаться локально на компьютер пользователь работать ncalayer следующий образ открываться вебсокет сервер на определённый порту куда отправляться разный род запрос опускать весь деталь подключение рассмотреть пока два запрос чтобы иметь общий представление как ncalayer работать после отправка запрос на машина где стоить ncalayer открываться диалоговый окно который предлагать выбрать файл ключ эцп соответственно после выбор ключ через сокет получать следующий ответ не быть публиковать ответ но там содержаться подписать часть xml который быть в запрос повториться получить пароль от хранилище ключ эцп ложиться на плечо сайт то есть иначе работать нельзя не быть углубляться глубоко в технический деталь и реализация описать как можно это сделать теперь чтобы этот уязвимость эксплуатировать нужно понимать как работать механизм вход на egov kz через эцп для вход на egov kz xml от egov kz подписываться пользователь и передаваться на сервер где проверяться если подпись валидно то осуществляться вход с сторона ncalayer процесс вход состоять из следующий шаг портал запрашивать следующий дать из ncalayer loadslotlist здесь можно ответить ошибка getkeys getsubjectdn getnotbefore getnotafter и signxml если ncalayer правильно подставить этот дать от другой пользователь то соответственно мы удачно войти в система здесь очень важный правильно получить от ncalayer только subjectdn и xml для подпись теперь как получить доступ к egov kz от другой человек механизм update который без ведомо пользователь в фоновый режим подписывать данные

