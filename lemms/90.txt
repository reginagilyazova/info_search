написание blockchain менее чем за 200 строка код на go kostozyb привет хабра представлять ваш внимание перевод статья данный урок являться хорошо адаптировать про простой написание blockchain на javascript мы портировать он на go и добавить дополнительный фич такой как просмотр цепочка в браузер пример в урок быть основываться на дать сердцебиение мы ведь медицинский компания для интерес вы мочь подсчитать свой кола в удар в минута и учитывать это число в время учебный курс почти каждый разработчик в мир слышать про blockchain но большинство до сей пора не знать как это работать многие слышать только про биткоина данный пост являться попытка развеять слух о blockchain помогать вы написать свой собственный blockchain на go менее чем в 200 строка код в конец данный урок вы смочь запустить и записать дать в blockchain локально а так же просмотреть это в браузер есть ли более хороший способ узнать о blockchain чем создать свой собственный что бы этот пост оставаться простой мы не быть рассматривать более совершенный концепция и сетевой взаимодействие быть моделироваться что бы вы мочь просматривать ваш blockchain и просматривать добавить блок сетевой работа быть зарезервированный для будущий пост поскольку мы собираться писать код на go мы предполагать что у вы уже есть опыт разработка на немой после мы так же быть использовать следующий пакет spew позволять мы красиво выводить структура и слайс в консоль gorilla mux это популярный пакет для написание обработчик запрос позволять мы читать из файл который лежать в корн каталог поэтому мы не прийтись задавать в наш код такой параметр как http порт давать создать наш файл в корн каталог который быть определять порт на который мы быть слушать http запрос просто добавить строка в файл создать файл весь реализация быть в это файл и быть содержимый менее 200 строка код импорт пакет вместе с объявление пакет давать определимый структура каждый из наш блок который представлять себя blockchain чуть ниже мы объяснимый для что необходимый весь этот поль каждый блок содержимый дать который быть записать в blockchain и представлять себя событие каждый замер пульс давать объявить наш blockchain который представлять себя просто слайс структура итак как хеширование использоваться в блок и в blockchain мы использовать хэш для определение и сохранение блок в правильный порядок благодаря тот что пол в каждый блок ссылаться на пол в предыдущий блок том е они равный мы знать правильный порядок блок зачем мы хэшировать мы получать хэш по два основный причина давать написать функция который взять наш дать и создать для они хэш sha256 функция объединять в один строка из структура который являться аргумент функция и возвращаться весь в вид строковый представление хэш sha256 теперь мы мочь сгенерировать новый блок с весь необходимый элемент с помощь новый функция для это мы нужно быть передать предыдущий блок что бы мы мочь получить он хэш и индекс а так же передать новое значение частота пульс обратить внимание что текущий время автоматически записываться в блок через так же обратить внимание что быть вызвать функция в пол скопировать значение хэш из предыдущий блок просто увеличиваться на единица от значение из предыдущий блок теперь мы нужно написать функционал для проверка валидность предыдущий блок мы делать это проверять что бы убедиться что они увеличиваться так как это ожидаться мы так же проверять что бы действиетльный совпадать с предыдущий блок и наконец мы повторно вычислять хэш текущий блок что бы убедиться в он корректность давать написать функция который выполнять весь этот действие и возвращать bool значение функция вернуть если весь проверка пройти верно что если мы столкнуться с проблема когда два узел наш blockchain экосистема добавить блок в свой цепочка и мы получить они оба какой из они мы выбрать как правильный источник мы выбирать наиболее длинный цепь это классический проблема в blockchain итак давать убедиться что новый цепочка который мы принимать длинный текущий цепь если это так мы мочь перезаписать наш цепочка новый у который есть новый блок или блок мы просто сравнимый длина срез цепь если у вы получиться то мочь похлопать себя по спина мы описать каркас функционал для наш blockchain теперь мы нужный удобный способ просмотр наш blockchain и запись в он в идеал в браузер что бы мы мочь похвастаться друг мы предполагать что вы уже знакомый с тем как работать веб сервер и у вы есть немного опыт работа на go использовать пакет который загрузить ранее создать функция для запуск сервер и вызвать она поздний обратить внимание что порт конфигурироваться из ваш файл который мы создать ранее вызвать метод для вывод в консоль информация о запуск сервер мы настраивать сервер и вызывать обычный практика в go теперь мы нужно написать функция который быть определять наш обработчик для просмотр и запись наш blockchain в браузер мы хватить два простой роут если мы отправлять запрос на то мы просматривать наш цепочка если отправлять запрос то мы мочь записывать дать обработчик запрос мы быть описывать blockchain в формат json который можно быть просматривать в любой браузер по адрес вы мочь задать порт в файл запрос немножко сложный и мы понадобиться новый структура сообщение код для обработчик запись в blockchain причина по который мы использовать отдельный структура сообщение заключаться в тот что тело запрос приходить в формат и мы быть использовать он для запись новый блок это позволять мы отправить запрос следующий вид и наш обработчик заполнить остаться часть блок за мы пример частота пульс мочь использовать сво значение пульс после декодирование тело запрос в структура мы создать новый блок передавать предыдущий бок и новое значение пульс в функция который мы писать ранее провести быстрый проверка что бы убедиться в правильность новое блок функция хотеться получать уведомление когда наш запрос успешный или завершиться с ошибка мы использовать небольшой обёртка для получение результат помнить что в go никогда не игнорироваться ошибка давать соединимый весь наработка в один функция что здесь происходить весь код вы мочь забрать с давать проверить наш код запускать в терминал наш приложение в терминал мы видеть что веб сервер работать и мы получать вывод наш проинициализировать первое блок теперь посетить как и ожидаться мы видеть один блок теперь давать отправить запрос для добавление блок использовать postman мы собираться добавить несколько новый блок с различный значение обновить наш страничка в браузер теперь можно увидеть новое блок в наш цепочка новое блок содержимый соответствовать у старое блок как мы и ожидать поздравлять вы только что создать свой blockchain с правильный хэширование и блочный проверка теперь вы мочь изучать более сложный проблема blockchain такой как proof of work proof of stake smart contracts dapps side chains и другой данный урок не затрагивать такой тема как новое блок добавляться с помощь proof of work это быть отдельный урок но существовать множество blockchain и без механизм proof of work сейчас весь моделироваться путём запись и просмотр дать blockchain на веб сервер в это урок нет составлять p2p если вы хотеть что бы мы добавить механизм proof of work и работа по сеть вы мочь сообщить о это в или подписаться на мы в это хороший способ связаться с мы мы ждать новый отзыв и новый предложение по урок мы рад услышать вы чтобы узнать большой о coral health и о тот как мы использовать blockchain в исследовательский работа по медицина мочь посетить наш

