плат ble400 и разработка под nrf51822 shadwork для разработка под микроконтроллер nrf51822 существовать несколько комплект от nordic semiconductor весь они достаточно дорога зато обеспечивать возможность удобный работа без возня с программатор при это у китайский производитель можно обнаружить плата облегчать отладка контроллер за смешной деньга статья посвятить работа с клон плата от waveshare который прод тся под название плат предназначить для использование совместно с модуль nrf51822 представлять себя распаять чип с антенный и пара кварцевый резонатор стоимость комплект из плата и модуль составлять около 20 доллар ble400 содержимый на борт usb порт и преобразователь usb uart на база чип cp2102 с вывести сигнал rx tx cts и rts на уровень схема она частично совместимый с pca10001 отладочный плата от nordic пара светодиод и два кнопка подключить к тем же порт любитель помигать светодиод это немного упростить жизнь к сожаление плат не уметь выполнять роль программатор nrf51822 хотя прошивка позволять работать с загрузчик тип arduino в сеть есть бегло перечислить что же именно встроить в плата частично это быть перевод документация изначально в модуль прошить код для работа с от nordic semiconductor для проверка он работоспособность это достаточно подключать плата к пк устанавливать драйвер для cp2102 и подключаться к плата при помощь терминал я воспользоваться putty параметр порт скорость 38400 дата битый 8 стоповый битый один управление поток программный подключаться в терминал вбивать английский символ y или y получать в ответ команда start контроллер работать теперь он доступный в список ble совместимый устройство на телефон с имя nordic_uart установить приложение для можно поиграться с передача символ через виртуальный bluetooth терминал и протестировать эмуляция uart переходить к программирование мы вс таки понадобиться программатор оригинал от segger быть немножко дорога но благодаря автолюбитель на рынок достаточно клон j link arm v8 стоять они около 15 доллар и для наш цель они более чем достаточно быть считать что драйвер на программатор например j link software v4 52b уже установить подключаться к плата стандартный jtag кабель от программатор или четыре проводы достаточно соединить vtref gnd swdio и swclk для проверка подключение запустить jlink exe и получить информация о установленный чип мы понадобиться следующий по для получение lite версия keil mdk arm необходимый регистрация остальной доступно для скачивание так nrfgo studio версия 1 21 2 у я так и не запуститься под windows 10 но младший версия 1 15 1 работать последний версия sdk с поддержка плата pca10001 это версия 6 скачивать по после установка sdk в папка куда установить среда keil появиться каталог содержимый весь необходимый файл пример рассчитать на использование keil версия 4 файл проект иметь расширение uvproj в отличие от keil 5 где расширение uvprojx собственно keil 4 мы использовать чтобы не запутаться в файл конфигурация и совместимость пример программировать плата можно не только через консоль j link commander но и через nrfgo studio через не же мы мочь очистить чип или залить softdevice для работа с bluetooth делаться это из меню nrf51 programming в чип уже залить ядро ble стек очистить он можно через пункт меню erase all следующий задача помигать светодиод заботливо распаять на плата как уже упоминаться ранее светодиод и кнопка совместимый с плата pca10001 от nordic значит использовать пример оттуда открывать в папка с keil4 файл проект blinky uvproj собирать проект нажать f7 и прошивать через меню flash download у я по умолчание не прошиваться из за выбрать по умолчание скорость заливка jtag равный 2000 khz исправить можно из меню option for target debug setting после замена на 100 khz вс успешно заработать светодиод led0 и led1 успешно перемигиваться микроконтроллер работать если загрузить вс же не получаться можно попробовать прошить hex из из папка с использование nrfgo studio или из консоль программатор j link но сначала стоить убедить что в настройка keil выбрать программатор j link светодиод это замечательный но мы вс же нужный bluetooth пример для работа лежать в папка это реализация ibeacon для мы он интересный работа с программный ble стек от nordic пример рассчитать на версия стек s110 самый простой по возможность но для демонстрация работоспособность это вполне достаточно ядро необходимый скачать отдельно и версия он достаточно много при это версия заголовок должный коррелировать с версия ядро скачать ядро можно по в раздел softdevices изначально вместе с sdk идти заголовочный файл для версия 7 0 0 но у я этот версия ядро не стартовать теоретически работать должный любой версия стек доступный для скачивание версия v6 v7 v8 с пример из sdk семь и восемь версия стек у я не заработать остановиться на 6 2 1 скачивать распаковывать в удобный для вы папка например cores очищать уже существующий папка и копировать в не заголовочный файл из папка include распаковать ядро softdevice необходимый прошить для это воспользоваться nrfgo studio выбирать из меню device manager пункт nrf51 programming и убеждаться что программатор не отвалиться в закладка program softdevice выбирать файл с ядро если файл правильный формат внизу быть указанный занимать мкостя для этот версия softdevice равный 80кб жм метр кнопка program карта память устройство теперь иметь следующий вид оперативный память стать маленький на 8кб а один 80 килобайт постоянный память занять ядро менять target на цель с стек s110 выбирать из меню nrf51822_xxaa_s110 256к для сборка пример с мигать светодиод при установленный softcore необходимый ввести корректив в карта память делаться это из меню options for target target базовый адрес меняться на а свободный память стартовать с адрес 0x20002000 так как при заливка скетч мы не должный затереть ядро менять настройка программатор делаться это из меню options for target debug кнопка setting собирать проект и заливать он в контроллер если ядро установиться корректно мы получить тот же мигать светодиод пора заливать прошивка имитировать ibeacon открывать проект из папка менять карта память по аналогия с мигать светодиод собирать и заливать в устройство если весь прошлый успешно led0 быть светиться это индикатор что пакет рассылаться устанавливать на устройство android или ios приложение уметь видеть ibeacon я скачать uuid устройство совпадать с константа app_beacon_uuid в исходный код значит это наш маячок в принцип этот информация достаточно для быстрый и весьма недорогой старт работа с ble в минус это поддержка устаревший keil 4 и нестабильный работа программатор на частота 100 khz и выше если среда разработка выдавать ошибка загрузка уменьшать скорость доступ до 50 khz или даже менее иногда программатор отваливаться и вернуть он к жизнь можно только запуск jlink exe возможно это связать с тем что он являться клон оригинала

