статистика backblaze научный подход к анализ над жность накопитель ilmarin77 фирма backblaze регулярно публиковать по отказ свой ж сткий диск и даже выложить в свободный доступ полный арх с s m a r t параметр весь свой накопитель в этот статья я показать как с помощь при помощь с помощь научный метод рассчитывать над жность накопитель в статистика анализ выживаемость или над жность заниматься раздел под название в кратец это набор метод позволять сравнивать и рассчитывать как различный фактор влиять на продолжительность жизнь в медицина время наработка на отказ в механика и том далее в общий случай это анализ время до наступление некоторый событие том е ответить на вопрос тип каков быть доля выжить среди пациент спустя некоторый время после примя нный техника лечение или какой процент накопитель выйти из строй в следующий год при это ответ на такой вопрос надо искать когда время наблюдение за состояние больной или накопитель ограничить и не возможно определить время жизнь весь пациент компания backblaze выложить в открытый доступ с весь параметр s m a r t весь свой ж сткий диск в формат разбитый на файл по день если весь этот файл импортировать в база дать они предлагать свой собственный скрипт для импорт в sqlite3 то получиться таблица с 90126570 запись занимать она примерно и описывать накопитель я сделать небольшой скрипт который вытаскивать в один таблица следующий дать о каждый накопитель производитель модель серийный номер мкостя дата начало служба время работа либо до окончание наблюдение параметр s m a r t 9 либо до событие и признак событие csv файл с этот информация можно для обработка быть использовать с пакет для начало пример как принять представлять функция выживание смотреть на график 1 это пример график выживание по методология каплан мейер по вертикальный ося отложить процент выжить устройство по горизонтальный количество день крестик показывать отцензурировать устройство том е они дожить как минимум до момент x а далёкий след теряться пунктирный линия показывать 95 доверительный интервал методология появиться ещ в 58 год и с тот пора активно использоваться для описание функция выживание надо заметить что это непараметрический метод и использовать кусочно линейный функция для аппроксимация функция выживание том е с небольшой количество дать хорошо видный ступенька в пакет survival это делаться следующий образ где в качество аргумент сначала ида том формула где слева специальный функция surv показывать что мы иметь дело с дать и событие а потом источник дать age_days время status код для событие 1 событие произойти 0 дать отцензурировать результат можно красиво нарисовать с помощь метод k m позволять сравнивать функция выживание между себя чтобы определить есть ли между они статистически значимый разница для пример взять дать о два модель накопитель st31500341as и st31500541as для сравнение распределение использовать функция survdiff для мы самый главный последний строчка с значение p оно показывать вероятность тот что распределение не значительно отличаться в дать случай даже на глаз видно что быть такой не мочь стоить заметить что такой способ можно только сказать есть разница или е нет том е не возможно сказать что страта a умирать на xx быстрый страта б ещ один интересный график посмотреть как живучесть самый популярный в backblaze накопитель st4000dm000 изменяться с время установка видно что разница есть p 0 0001 но интересно узнать насколько она большой и тут мы на помощь приходить пропорциональный риск кокс она позволять оценивать относительный риска между разный страта но исходить из предположение что весь они отличаться друг от друг строго пропорциональный для расчёт использоваться функция coxph теперь сравнимый 4 самый популярный модель больший накопитель 8тб st8000nm0055 st8000dm002 10тба st10000nm0086 и 12тба st12000nm0007 метод k m показывать что разница между они нет несмотря на странный скачок для модель st12000nm0007 если мы захотеть сравнить десять самый популярный накопитель получаться следующий картина самый над жный hds5c3030ala630 hms5c4040ale640 hds5c4040ale630 hds722020ala330 hms5c4040ble640 можно сделать попарный сравнение функция pairwise_survdiff если интересно есть ли между они разница если мы интересно не просто сравнивать разный модель накопитель а ответить на более конкретный вопрос тип через какой промежуток время скорее всего выйти из строй один из двадцать диск в мо метр файл сервер то на помощь приходить параметрический модель простой случай модель с постоянный риск она предпологаета что на вс метр протяжение жизнь накопитель шанс умереть в данный промежуток время примерно одинаковый например этот модель описывать процесс распад радиоизотоп в литература она называться экспоненциальный модель потому что функция выживание описываться формула на практика известно что механический система хороший описываться функция с формула в пакет survival для построение этот модель использоваться функция например попробовать построить модель вейбулла по 10 популярный накопитель сравнимый с экспоненциальный модель и посмотреть как предсказать функция распределение совпадать с непараметрический k m на пример сравнение два параметрический модель с непараметрический на пример видно что модель вейбулла хороший описывать процесс выход накопитель из строй можно сравнить модель статистически с помощь информационный критерий акаик модель с меньший значение aic хороший описывать наблюдать дать и посмотреть ожидать время выход из строй 10 накопитель на оценка видно что модель вейбула да том более ранний оценка выход накопитель из строй кстати если просто рассчитывать выход накопитель из строй каждый год то получаться приближение экспоненциальный модель который в дать случ да том завысить результат вот так с помощь свободно выложить дать по поломка накопитель можно заниматься предсказание будущий трата на замена диск в массив дать от backblaze есть ещ куча интересный информация например можно посмотреть как температурный режим параметр smart 194 в время работа накопитель повлиять на срок он служба или как количество цикл запись параметр 241 скрипт и csv файл для расчёт если есть интерес можно куда нибыть загрузить sqlite база дать с весь база дать backblaze 2 7гб после упаковка xz когда вы рассчитывать выход из строй накопитель за год то вы неявный способ использовать этот модель если p 1 то вероятность отказ с время уменьшаться p 1 иметь экспоненциальный модель и p 1 вероятность отказ с время увеличивается

