Анимации в Android по полочкам (Часть 3. «Низкоуровневые» анимации)
juztoss

 
 
Часть 4. Анимации переходов 
Часть 5. Библиотеки для работы с анимацией 
 
Все методы рассмотренные в предыдущих частях хороши и удобны, однако если нам нужно анимировать большое количество объектов, они могут оказаться не подходящими. В данной части мы рассмотрим способы которые нам позволят работать с действительно большим количеством объектов и создавать программно сложные анимации. 
 
 
 
 
 
Первый способ который мы рассмотрим это рисование в методе   нашего объекта  . Реализуется данный способ просто, достаточно переопределить   и в конце вызвать  . 
 
В данном примере наш   будет перемещаться по оси x. 
 
 
Пример со снежинками выше будет занимать несколько больше кода, т.к. нам нужно хранить состояние каждой отдельной снежинки отдельно. 
 
 
 
 
 
 
 
 
 
 
 
 
Что если расчёт следующего шага анимации будет занимать значительное время? Мы всё ещё можем воспользоваться первым способом и вынести расчёты в отдельный поток. Но это всё равно не приведёт к 100% плавности в анимации т.к. UI thread может быть загружен ещё чем либо помимо нашей анимации. 
 
Android позволяет отвязаться от основного цикла(main loop) отрисовки с помощью компонента  . А раз мы больше не привязаны к основному циклу, то нам придётся держать свой поток для расчётов и отрисовки.   предоставляет коллбэки в которых мы можем запустить и остановить наш поток. В потоке по окончанию расчётов мы будем отрисовывать нашу анимацию. 
 
Реализация той же анимации снежинок будет выглядеть следующим образом: 
 
 
 
 
 
 
 
 
 
 
 
 
 
Точно также, как и на канвасе, мы можем рисовать используя OpenGL API. Если вы задумали что-либо сложнее чем куб на картинке, то стоит посмотреть в сторону какого-либо движка, например  . К сожалению, даже базовый пример займёт здесь довольно много места, поэтому ограничимся только этим кратким превью.  
 
 
 
 
 
 
 
 
 
 
Все примеры можно  .
