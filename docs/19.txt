Немного сокращаем действия
encore-show
Каждый администратор всегда сводит свои действия к минимуму, пишет скрипты, пишет программы и чтобы меньше делать рутинных задач приходится проявлять фантазию и поработать головой. Хочу поделиться своим опытом, может кому-то и поможет. У меня в компании сейчас малое количество сотрудников, порядка 15-18. Почта создается на сервере Zimbra, а каждый сотрудник работает под своей локальной учетной записью на компьютере. И до меня тут исторически сложилось, что AD нет. 
Появилась потребность в разворачивании файлового сервера, я развернул его на базе MS Windows server 2016, из себя он представляем роль файлового сервера, где создан VMDX(виртуальный жесткий диск) который и является общим пулом для всех. По доступу все просто, создаем локальные группы и даем разрешения на группы, а далее каждого сотрудника добавляем в эти самые группы. Но заводить каждого сотрудника вручную, двигать мышкой, перещелкивать вкладки и потом еще писать письмо сотруднику с паролем и доступом, это не "тру". В итоге я написал небольшой скрипт, где из одного консольного окна мы делаем эти все действия в 4 шага.
Для начала нам надо создать пользователя, создать ему пароль и добавить описание, для этого передать данные в переменные.
После прохождения этого блока мы получаем строчку в файле — "02/12/2018 08:18:24 для сотрудника srv-fs\testovich создан пароль a15qBci2m9", далее нужно создавать эту учетную запись.
В итоге после прохождения следующего блока мы получаем учетную запись с группой Share.
А теперь отправим сотруднику данные для входа.
На почту сотрудика придет сообщение с темой "Доступ к общему диску", а в теле письма будет

"Ivanov Ivan Testovich, вам предоставлен доступ к общему сетевому диску. Для входа используйте. Имя пользователя srv-fs\testovich | Пароль a15qBci2m9|"
Не забываем, ведь сотрудник работает в каком-то подразделении а у нас доступ к папкам по группам, теперь нам надо добавить пользователя в нужную группу.
И в конце всего этого мы имеет готового пользователя с правильными группами, описанием и паролем. Сотрудник же в свою очередь получил письмо и подключился к диску, а если и нет то, это уже совсем другая история...
 
 
 
 
 
 
 
 
 
 
 
 
 
 

